<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body { background:#0d0d0d; color:white; font-family:system-ui; padding:20px; }
    .box { background:#1a1a1a; padding:20px; border-radius:12px; border:1px solid #333; margin-bottom:20px; }
    input, select {
      width:100%; padding:12px; margin-bottom:10px;
      border-radius:10px; border:none;
    }
    button {
      width:100%; padding:12px; background:gold;
      border:none; border-radius:10px; font-weight:bold;
      font-size:16px;
    }
  </style>
</head>
<body>

<h2>ğŸ’° Ø´Ø­Ù† Ø§Ù„Ø±ØµÙŠØ¯</h2>

<div class="box">
  <label>Ø§Ø®ØªØ± Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ø­Ù†</label>
  <select id="amount">
    <option value="10">$10</option>
    <option value="50">$50</option>
    <option value="100">$100</option>
    <option value="200">$200</option>
  </select>

  <label>Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„ (TXID)</label>
  <input type="text" id="txid" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù‡Ù†Ø§">

  <button onclick="sendRequest()">Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø´Ø­Ù†</button>
</div>

<div class="box">
  <b>Ù…Ø­ÙØ¸Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹:</b><br>
  <span style="color:gold">TPNoGerv1EMBSdrs9Yca93eCQUVsoNiRvq</span><br><br>

  <b>Ù…Ù‡Ù…:</b><br>
  Ø¨Ø¹Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡.<br>
  Ø§Ù„Ø³Ø­Ø¨ Ù…Ù…Ù†ÙˆØ¹ Ù„Ø£ÙˆÙ„ 25 ÙŠÙˆÙ… Ø¨Ø¹Ø¯ Ø£ÙˆÙ„ Ø´Ø­Ù†.<br>
</div>

<button onclick="goBack()">Ø±Ø¬ÙˆØ¹</button>

<script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";

const supabase = createClient(
  "https://aswduknpmvjtnmynfdex.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFzd2R1a25wbXZqdG5teW5mZGV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzODkzMDEsImV4cCI6MjA4MDk2NTMwMX0.5rya3VsjLUJFykuFHOocA4LGoAc3MslSwUci1uDowto"
);

window.sendRequest = async () => {
  let { data: userData } = await supabase.auth.getUser();
  if (!userData.user) { alert("ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„"); return; }

  let amount = document.getElementById("amount").value;
  let txid = document.getElementById("txid").value;

  if (!txid) { alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø±Ù‚Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„"); return; }

  let { error } = await supabase
    .from("deposit_requests")
    .insert({
      user_id: userData.user.id,
      amount: amount,
      txid: txid,
      status: "pending"
    });

  if (error) alert("Ø®Ø·Ø£: " + error.message);
  else alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨! ÙŠØ±Ø¬Ù‰ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯.");
};

window.goBack = () => { window.location.href = "dashboard.html"; };
</script>

</body>
</html>
